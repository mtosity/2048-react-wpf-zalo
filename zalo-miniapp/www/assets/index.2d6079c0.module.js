var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(t,o,i)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[o]=i,n=(e,t)=>{for(var o in t||(t={}))l.call(t,o)&&s(e,o,t[o]);if(i)for(var o of i(t))r.call(t,o)&&s(e,o,t[o]);return e},a=(e,i)=>t(e,o(i));"undefined"!=typeof require&&require;import{c,z as f,R as h,Z as p,P as u,a as m,b as d,d as g,e as y}from"./vendor.d8625d8e.module.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const b={gameOver:!1,boxes:[[{title:0,com_ani:!1},{title:0,com_ani:!1},{title:0,com_ani:!1},{title:0,com_ani:!1}],[{title:0,com_ani:!1},{title:0,com_ani:!1},{title:0,com_ani:!1},{title:0,com_ani:!1}],[{title:0,com_ani:!1},{title:0,com_ani:!1},{title:0,com_ani:!1},{title:0,com_ani:!1}],[{title:0,com_ani:!1},{title:0,com_ani:!1},{title:0,com_ani:!1},{title:0,com_ani:!1}]]},_=e=>{const t=[...e];let o=[];for(let i=0;i<4;i++){let e=Math.floor(4*Math.random());o.push(e)}return o[0]===o[2]&&o[1]===o[3]&&(o[0]=(o[0]+1)%4),t[o[0]][o[1]]=a(n({},t[o[0]][o[1]]),{title:2,com_ani:!0}),t[o[2]][o[3]]=a(n({},t[o[2]][o[3]]),{title:2,com_ani:!0}),t};var v,O;(O=v||(v={}))[O.Left=0]="Left",O[O.Right=1]="Right",O[O.Up=2]="Up",O[O.Down=3]="Down";const w=(e,t)=>{const o=[...e];let i=!1;if(2===t)for(let l=0;l<4;l++){let t=[],r=[],s=0;for(let o=0;o<4;o++)if(0!==e[o][l].title)0===s?s=e[o][l].title:e[o][l].title===s?(!1===i&&(i=!0),t.push(2*s),r.push(t.length-1),s=0):(t.push(s),s=e[o][l].title);else if(!1===i)for(let t=o;t<4;t++)0!==e[t][l].title&&(i=!0);0!==s&&t.push(s);let n=t.length;for(let e=0;e<n;e++)o[e][l].title=t[e];for(let e=n;e<4;e++)o[e][l].title=0;let a=r.length;for(let e=0;e<a;e++)o[r[e]][l].com_ani=!0}if(3===t)for(let l=0;l<4;l++){let t=[],r=[],s=0;for(let o=3;o>=0;o--)if(0!==e[o][l].title)0===s?s=e[o][l].title:e[o][l].title===s?(!1===i&&(i=!0),t.push(2*s),r.push(t.length-1),s=0):(t.push(s),s=e[o][l].title);else if(!1===i)for(let t=o;t>=0;t--)0!==e[t][l].title&&(i=!0);0!==s&&t.push(s);let n=t.length;for(let e=0;e<n;e++)o[3-e][l].title=t[e];for(let e=0;e<4-n;e++)o[e][l].title=0;let a=r.length;for(let e=0;e<a;e++)o[3-r[e]][l].com_ani=!0}if(0===t)for(let l=0;l<4;l++){let t=[],r=[],s=0;for(let o=0;o<4;o++)if(0!==e[l][o].title)0===s?s=e[l][o].title:e[l][o].title===s?(!1===i&&(i=!0),t.push(2*s),r.push(t.length-1),s=0):(t.push(s),s=e[l][o].title);else if(!1===i)for(let t=o;t<4;t++)0!==e[l][t].title&&(i=!0);0!==s&&t.push(s);let n=t.length;for(let e=0;e<n;e++)o[l][e].title=t[e];for(let e=n;e<4;e++)o[l][e].title=0;let a=r.length;for(let e=0;e<a;e++)o[l][r[e]].com_ani=!0}if(1===t)for(let l=0;l<4;l++){let t=[],r=[],s=0;for(let o=3;o>=0;o--)if(0!==e[l][o].title)0===s?s=e[l][o].title:e[l][o].title===s?(!1===i&&(i=!0),t.push(2*s),r.push(t.length-1),s=0):(t.push(s),s=e[l][o].title);else if(!1===i)for(let t=o;t>=0;t--)0!==e[l][t].title&&(i=!0);0!==s&&t.push(s);let n=t.length;for(let e=0;e<n;e++)o[l][3-e].title=t[e];for(let e=3-n;e>=0;e--)o[l][e].title=0;let a=r.length;for(let e=0;e<a;e++)o[l][3-r[e]].com_ani=!0}return i?x(o):o},x=e=>{let t=[];for(let i=0;i<4;i++)for(let o=0;o<4;o++)0===e[i][o].title&&t.push({i:i,j:o});let o=t.length;if(o>0){let i=t[Math.floor(Math.random()*o)];e[i.i][i.j].title=2,e[i.i][i.j].com_ani=!0}return e},M=e=>{const t=[...e];return e.forEach((e=>{e.forEach((e=>{e.com_ani=!1}))})),t};var R,S;(S=R||(R={}))[S.MoveUp=0]="MoveUp",S[S.MoveDown=1]="MoveDown",S[S.MoveLeft=2]="MoveLeft",S[S.MoveRight=3]="MoveRight",S[S.InitRandom=4]="InitRandom",S[S.ResetComAni=5]="ResetComAni",S[S.ResetAll=6]="ResetAll";const j=c(((e=JSON.parse(JSON.stringify(b)),t)=>{switch(t.type){case 4:return a(n({},e),{boxes:_(e.boxes)});case 0:return a(n({},e),{boxes:w(e.boxes,v.Up)});case 1:return a(n({},e),{boxes:w(e.boxes,v.Down)});case 2:return a(n({},e),{boxes:w(e.boxes,v.Left)});case 3:return a(n({},e),{boxes:w(e.boxes,v.Right)});case 5:return a(n({},e),{boxes:M(e.boxes)});case 6:return JSON.parse(JSON.stringify(b));default:return e}}));class E{constructor(e){this.initRandom=()=>this.dispatch({type:4}),this.moveUp=()=>this.dispatch({type:0}),this.moveDown=()=>this.dispatch({type:1}),this.moveLeft=()=>this.dispatch({type:2}),this.moveRight=()=>this.dispatch({type:3}),this.resetComAni=()=>this.dispatch({type:5}),this.resetAll=()=>this.dispatch({type:6}),this.dispatch=e}}const P=()=>{const e={name:"2048-zalo",theme:"auto",store:j};return f((()=>{})),h.createElement(p,n({},e),h.createElement(u,{store:j},h.createElement(m,{main:!0,className:"safe-areas",url:"/"})))};var A=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:P});var L={app:{title:"2048 MTosity",headerColor:"#1843EF",textColor:"white",statusBarColor:"#1843EF",leftButton:"both"},debug:!1,listCSS:[],listSyncJS:[],listAsyncJS:[],pages:[]};window.APP_CONFIG||(window.APP_CONFIG=L),d.use(g),y.render(h.createElement(P),document.getElementById("app"));export{E as D,A as a};
